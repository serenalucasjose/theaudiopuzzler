(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{429:function(e,t,r){var content=r(448);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(17).default)("3c830502",content,!0,{sourceMap:!1})},447:function(e,t,r){"use strict";r(429)},448:function(e,t,r){var n=r(16)(!1);n.push([e.i,"#audio-playground{width:100%;position:relative}#audio-playground .canvas-wrapper>div,#audio-playground .speech-wrapper div{display:flex;flex-direction:row;grid-gap:1rem;gap:1rem;flex-wrap:wrap;justify-content:flex-start;align-items:center}#audio-playground .speech-wrapper div{width:100%;height:100%}#speech-waveform wave{width:100%!important}.region-card{position:relative;overflow:hidden}.region-card canvas{position:relative;z-index:1}.region-card .tag-overlay{position:absolute;z-index:2;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.5rem;color:#fff}.sortable-ghost{display:none!important}",""]),e.exports=n},476:function(e,t,r){"use strict";r.r(t);var n=r(412),o=r(269),c=r(530),l=r(505),f=r(420),d=r(48),h=(r(43),r(3),r(38),r(57),r(50),r(36),r(9),r(58),r(62),r(51),r(29)),v=(r(37),r(92),r(474)),m=r.n(v),w=r(475),y=r.n(w),x=r(436),S=r.n(x);function k(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var _={mixins:[{computed:{isMobile:function(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},isMobileOrTablet:function(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name||"md"===this.$vuetify.breakpoint.name},isXl:function(){return"xl"===this.$vuetify.breakpoint.name},isLgOrXl:function(){return"lg"===this.$vuetify.breakpoint.name||"xl"===this.$vuetify.breakpoint.name}}}],props:{chunks:{type:Array,default:function(){return[]}},audioCtx:{type:AudioContext,required:!0}},components:{draggable:y.a},data:function(){return{wavesurferInstances:[],speechChunks:[],drag:!1,speechBuffer:null,wavesurfer:null,playingRegion:!1,currentSource:null}},computed:{canvasSize:function(){return this.isMobile?"40px":"80px"}},mounted:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.initSoundwaves(),e.initWavesurfer(),e.initSpeech();case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.$emit("setSpeechBuffer",{buffer:S.a.clone(this.wavesurfer.backend.buffer)}),this.$destroyWavesurferInstance(this.wavesurfer)},methods:{initSoundwaves:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l,f,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:n=k(e.chunks);try{for(n.s();!(o=n.n()).done;)c=o.value,l="#audio-chunk-".concat(c.regionAsSubBuffer.length),m.a.canvas(document.querySelector(l),c.regionAsSubBuffer,"#999999")}catch(e){n.e(e)}finally{n.f()}f=null===(r=e.$refs)||void 0===r?void 0:r.regionsWrapper,d=f.clientHeight,f.style.height="".concat(d,"px");case 7:case"end":return t.stop()}}),t)})))()},initWavesurfer:function(){this.wavesurfer=this.$createWavesurferInstance({container:"#speech-waveform",audioContext:this.audioCtx,interact:!0,scrollParent:!0}),this.$tearupWavesurferControls(this.wavesurfer)},playRegion:function(e){var t=this;this.playingRegion&&this.currentSource.stop(),this.playingRegion=!0,this.currentSource=this.audioCtx.createBufferSource(),this.currentSource.buffer=e,this.currentSource.connect(this.audioCtx.destination),this.currentSource.start(),this.currentSource.onended=function(){t.playingRegion=!1}},updateSpeech:function(e){var t=e.added.element,r=t.region,n=t.regionAsSubBuffer,o=S.a.clone(this.wavesurfer.backend.buffer),c=S.a.concat(o,n);this.wavesurfer.loadDecodedBuffer(c),this.wavesurfer.drawBuffer(),r.wavesurfer=this.wavesurfer,r.start=o.duration,r.end=c.duration,r.color="hsla(200, 50%, 70%, 0.4)",this.wavesurfer.stop()},initSpeech:function(){this.wavesurfer.clearRegions(),this.wavesurfer.loadDecodedBuffer(S.a.create(1))}}},$=(r(447),r(91)),component=Object($.a)(_,(function(){var e=this,t=e._self._c;return t(f.a,{staticClass:"pa-0",attrs:{id:"audio-playground"}},[t(n.a,{staticClass:"text-left mb-4",attrs:{icon:"mdi-gesture-swipe-down",rounded:"",color:"info"}},[t("h4",{staticClass:"text--h4 font-weight-regular"},[e._v("Drag'n drop clips")])]),e._v(" "),t("div",{ref:"regionsWrapper",staticClass:"canvas-wrapper mb-4"},[t("draggable",{attrs:{group:{name:"chunks",pull:"clone",put:!1},list:e.chunks,draggable:".region-card"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}}},e._l(e.chunks,(function(r,i){return t(l.a,{key:i,staticClass:"pa-2 region-card",attrs:{elevation:"2",color:"white",ripple:""},on:{click:function(t){return e.playRegion(r.regionAsSubBuffer)}}},[t("div",{staticClass:"tag-overlay"},[e._v("\n          "+e._s(r.region.data.tag)+"  \n        ")]),e._v(" "),t("canvas",{attrs:{id:"audio-chunk-".concat(r.regionAsSubBuffer.length),width:e.canvasSize,height:e.canvasSize}})])})),1)],1),e._v(" "),t("div",{staticClass:"speech-wrapper"},[t("draggable",{attrs:{list:e.speechChunks,group:"chunks",draggable:".region-card"},on:{change:e.updateSpeech}},[t(d.a,{staticClass:"mb-4",attrs:{color:"transparent",rounded:!0,elevation:"0",height:"150px",width:"100%"}},[t("div",{staticClass:"scroll--simple",attrs:{id:"speech-waveform"}})])],1),e._v(" "),t(c.a,{attrs:{group:""}},[t(o.a,{staticClass:"ml-auto",attrs:{color:"secondary",text:"",value:"left",xSmall:""},on:{click:function(t){return e.wavesurfer.play()}}},[e._v("\n        Preview\n      ")]),e._v(" "),t(o.a,{attrs:{value:"center",color:"error",text:"",xSmall:""},on:{click:e.initSpeech}},[e._v("\n        Clear\n      ")])],1)],1),e._v(" "),e._t("actions")],2)}),[],!1,null,null,null);t.default=component.exports}}]);